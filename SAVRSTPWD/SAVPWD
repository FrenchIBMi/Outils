PGM
DCLF QADSPOBJ
DCL &DATA *CHAR 2000
DCL &LEN *CHAR 4
CHGVAR %BIN(&LEN) 2000

DSPOBJD    OBJ(QSYS/*ALL) OBJTYPE(*USRPRF) OUTPUT(*OUTFILE) +
             OUTFILE(QTEMP/OBJTEMP)

OVRDBF QADSPOBJ QTEMP/OBJTEMP

LECTURE: RCVF
           MONMSG CPF0864 EXEC(GOTO SUITE)

           DLTDTAARA LIBPWD/&ODOBNM
            MONMSG CPF0000 EXEC(RCVMSG MSGTYPE(*EXCP))


            CRTDTAARA  DTAARA(LIBPWD/&ODOBNM) TYPE(*CHAR) LEN(2000)
            CALL       PGM(QSYRUPWD) PARM(&DATA &LEN 'UPWD0100' 'TEST530' +
             X'0000000000000000')
            CHGDTAARA  DTAARA(LIBPWD/&ODOBNM) VALUE(&DATA)
            GOTO LECTURE

SUITE:
            SNDPGMMSG  MSG('Mots de passe sauvegard√©s')
ENDPGM                                                        
